# STM32 Platform Guide –¥–ª—è C.A.R.E.

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–ª–∞—Ç—ã STM32

### 1. **STM32F407VET6 (–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è)**
- **–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**: STM32F407VET6
- **–Ø–¥—Ä–æ**: ARM Cortex-M4 @ 168 MHz
- **–ü–∞–º—è—Ç—å**: 512 KB Flash, 192 KB RAM
- **CAN**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CAN1 (2 –∫–∞–Ω–∞–ª–∞)
- **UART**: 6 –∫–∞–Ω–∞–ª–æ–≤ UART
- **SPI**: 3 –∫–∞–Ω–∞–ª–∞ SPI
- **GPIO**: 114 GPIO –ø–∏–Ω–æ–≤
- **–¶–µ–Ω–∞**: ~$15-25

### 2. **STM32F429ZIT6 (–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è)**
- **–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**: STM32F429ZIT6
- **–Ø–¥—Ä–æ**: ARM Cortex-M4 @ 180 MHz
- **–ü–∞–º—è—Ç—å**: 2 MB Flash, 256 KB RAM
- **CAN**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CAN1 (2 –∫–∞–Ω–∞–ª–∞)
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: LCD –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, SDRAM
- **–¶–µ–Ω–∞**: ~$25-35

### 3. **STM32F767ZIT6 (–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)**
- **–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**: STM32F767ZIT6
- **–Ø–¥—Ä–æ**: ARM Cortex-M7 @ 216 MHz
- **–ü–∞–º—è—Ç—å**: 2 MB Flash, 512 KB RAM
- **CAN**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CAN1 (2 –∫–∞–Ω–∞–ª–∞)
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: Ethernet, USB OTG
- **–¶–µ–Ω–∞**: ~$35-50

## üîß –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ STM32 –¥–ª—è C.A.R.E.

### ‚úÖ **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CAN –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**
- **CAN1**: 2 –∫–∞–Ω–∞–ª–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- **–°–∫–æ—Ä–æ—Å—Ç—å**: –¥–æ 1 Mbps
- **–§–∏–ª—å—Ç—Ä—ã**: 28 —Ñ–∏–ª—å—Ç—Ä–æ–≤ –¥–ª—è –ø—Ä–∏–µ–º–∞
- **–ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π

### ‚úÖ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- **–ß–∞—Å—Ç–æ—Ç–∞**: –¥–æ 216 MHz (STM32F7)
- **–ü–∞–º—è—Ç—å**: –¥–æ 2 MB Flash, 512 KB RAM
- **DMA**: –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏
- **FPU**: –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ float

### ‚úÖ **–ë–æ–≥–∞—Ç–∞—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è**
- **UART**: –¥–æ 8 –∫–∞–Ω–∞–ª–æ–≤
- **SPI**: –¥–æ 6 –∫–∞–Ω–∞–ª–æ–≤
- **I2C**: –¥–æ 4 –∫–∞–Ω–∞–ª–æ–≤
- **GPIO**: –¥–æ 114 –ø–∏–Ω–æ–≤
- **ADC**: –¥–æ 24 –∫–∞–Ω–∞–ª–æ–≤

### ‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞**
- **STM32CubeIDE**: –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è IDE
- **STM32CubeMX**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä
- **HAL**: Hardware Abstraction Layer
- **LL**: Low Level –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ STM32CubeIDE**
```bash
# –°–∫–∞—á–∞—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ STMicroelectronics
# https://www.st.com/en/development-tools/stm32cubeide.html
```

### 2. **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**
```bash
# –í STM32CubeIDE:
# File -> New -> STM32 Project
# –í—ã–±—Ä–∞—Ç—å STM32F407VET6
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–∏—Ñ–µ—Ä–∏—é
```

### 3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏**
- **UART2**: PA2/PA3 –¥–ª—è LD2450
- **CAN1**: PB0/PB1 –¥–ª—è CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–∞
- **SPI1**: PA4/PA5/PA6/PA7 –¥–ª—è MCP2515 (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
- **GPIO**: PC13/PC14 –¥–ª—è LED

## üîå –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### **LD2450 Radar**
```
LD2450    STM32F407
VCC   ->  3.3V
GND   ->  GND
TX    ->  PA3 (UART2_RX)
RX    ->  PA2 (UART2_TX)
```

### **CAN Transceiver (MCP2562)**
```
MCP2562   STM32F407
VCC   ->  5V
GND   ->  GND
TXD   ->  PB0 (CAN1_TX)
RXD   ->  PB1 (CAN1_RX)
```

### **LED Indicators**
```
Status LED: PC13
Error LED:  PC14
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º

| –ü–∞—Ä–∞–º–µ—Ç—Ä | ESP32 | RPi Pico | STM32F407 |
|----------|-------|----------|-----------|
| **–ß–∞—Å—Ç–æ—Ç–∞** | 240 MHz | 125 MHz | 168 MHz |
| **Flash** | 4 MB | 2 MB | 512 KB |
| **RAM** | 520 KB | 256 KB | 192 KB |
| **CAN** | –í–Ω–µ—à–Ω–∏–π | –í–Ω–µ—à–Ω–∏–π | **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π** |
| **UART** | 3 | 2 | 6 |
| **GPIO** | 34 | 26 | 114 |
| **–¶–µ–Ω–∞** | $8-15 | $4-8 | $15-25 |

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É

### **STM32F407VET6** - –õ—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è C.A.R.E.
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CAN –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- ‚úÖ –ë–æ–≥–∞—Ç–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### **–ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å STM32:**
- üéØ **–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**
- üéØ **–í—ã—Å–æ–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏**
- üéØ **–°–ª–æ–∂–Ω–∞—è CAN —Å–µ—Ç—å**
- üéØ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**

### **–ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å ESP32:**
- üéØ **WiFi/Bluetooth –Ω—É–∂–Ω—ã**
- üéØ **–ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø**
- üéØ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –±—é–¥–∂–µ—Ç**

### **–ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å RPi Pico:**
- üéØ **–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã**
- üéØ **–ü—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏**
- üéØ **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±—é–¥–∂–µ—Ç**

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### **STM32CubeMX –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
1. –í—ã–±—Ä–∞—Ç—å STM32F407VET6
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å UART2 (PA2/PA3)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CAN1 (PB0/PB1)
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SPI1 (PA4-PA7)
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GPIO (PC13/PC14)
6. –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥

### **HAL —Ñ—É–Ω–∫—Ü–∏–∏:**
```c
// CAN –æ—Ç–ø—Ä–∞–≤–∫–∞
HAL_CAN_AddTxMessage(&hcan1, &TxHeader, TxData, &TxMailbox);

// UART –æ—Ç–ø—Ä–∞–≤–∫–∞
HAL_UART_Transmit(&huart2, data, size, timeout);

// GPIO —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET);
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **–û–∂–∏–¥–∞–µ–º—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- **–†–∞–¥–∏–æ–ª–æ–∫–∞—Ü–∏—è**: 20 Hz (50ms —Ü–∏–∫–ª)
- **CAN –ø–µ—Ä–µ–¥–∞—á–∞**: 10 Hz (100ms —Ü–∏–∫–ª)
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: 50 Hz (20ms —Ü–∏–∫–ª)
- **–ó–∞–¥–µ—Ä–∂–∫–∞**: < 1ms
- **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ**: ~200mA @ 3.3V

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ STM32:**
- üöÄ **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞**
- üöÄ **–ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞**
- üöÄ **–í—ã—Å–æ–∫–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å**
- üöÄ **–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∞—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**

## üõ†Ô∏è –û—Ç–ª–∞–¥–∫–∞

### **STM32CubeIDE Debug:**
- **ST-Link**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –æ—Ç–ª–∞–¥—á–∏–∫
- **Breakpoints**: –£—Å–ª–æ–≤–Ω—ã–µ —Ç–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞
- **Watch**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- **Memory**: –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–∞–º—è—Ç–∏
- **Peripherals**: –†–µ–≥–∏—Å—Ç—Ä—ã –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```c
// UART –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
printf("C.A.R.E. STM32F407 Ready!\r\n");

// LED –∏–Ω–¥–∏–∫–∞—Ü–∏—è
HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET);
```

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**STM32F407VET6** - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è C.A.R.E. –±–ª–∞–≥–æ–¥–∞—Ä—è:
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º—É CAN –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É
- –í—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ
- –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è:**
- –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö —Ä–æ–±–æ—Ç–æ–≤
- –ê–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π
